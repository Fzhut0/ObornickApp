<div class="container" *ngIf="(accountService.currentUser$ | async) as user">
  <tabset>
    <tab heading="Add Link">
      <div class="link-form">
        <input type="text" [(ngModel)]="newLink.savedUrl" name="savedUrl" #savedUrl="ngModel" placeholder="URL" required pattern="https?://.+">
        <div *ngIf="savedUrl.invalid && (savedUrl.dirty || savedUrl.touched)" class="text-danger">
          <div *ngIf="savedUrl.errors?.['required']">
            URL is required.
          </div>
          <div *ngIf="savedUrl.errors?.['pattern']">
            Please enter a valid URL.
          </div>
        </div>
        <input type="text" [(ngModel)]="newLink.customName" name="customName" placeholder="Link Name">
        <p>Dodajesz do kategorii: {{this.selectedCategory?.customName}}</p>
          <app-recursive-category-options [categories]="categories"></app-recursive-category-options>
          <h5>Dodajesz do kategorii: {{this.selectedCategory?.customName}}</h5>
        <button class="btn btn-primary" [disabled]="savedUrl.invalid" (click)="addLink(user.username)">Add Link</button>
      </div>
    </tab>
    <tab heading="Add Category">
      <div class="category-form">
        <input type="text" [(ngModel)]="newCategory" placeholder="New Category">
        <button class="btn btn-primary"  (click)="addCategory(newCategory, user.username)">Add Category</button>
      </div>
    </tab>
    <tab heading="Add Subcategory">
      <div class="category-form">
        <input type="text" [(ngModel)]="newCategory" placeholder="New Category">
        <p>Select category:</p>
          <app-recursive-category-options [categories]="categories"></app-recursive-category-options>
          <h5>Dodaj do kategorii: {{this.selectedCategory?.customName}}</h5>
        <button class="btn btn-primary" *ngIf="this.selectedCategory" (click)="addSubcategory(newCategory, user.username, this.selectedCategory.categoryId)">Add Subcategory</button>
    </div>
    </tab>
    <tab heading="Manage Links">
      <app-recursive-category [categories]="categories"></app-recursive-category>
    </tab>
  </tabset>
</div>
